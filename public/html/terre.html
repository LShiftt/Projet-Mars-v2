<!DOCTYPE html>
<html lang="fr">
 <head>
    <title>Starter Three.js</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0,maximum-scale=1.0" />
    <link href="/public/css/terre.css" rel="stylesheet" />
 </head>
 <body>
    <audio controls loop autoplay style="display: none;" id="background-audio">
        <source src="/public/sound/game_music.mp3" type="audio/mpeg">
    </audio>
    <div id="scene-container">
    <!-- le canvas sera injecté ICI -->
      <div id="narrateur">
         <p></p>
      </div>
    </div>

 <script type="module" src="/js/terre/terre.js"></script>
   <script>
   document.addEventListener("DOMContentLoaded", () => {
    const phrases = [
        "La Terre… notre maison. Mais nous l’avons abîmée. Elle ne pourra plus nous abriter éternellement.",
        "Les ressources s’épuisent, le climat se dérègle… Si nous voulons survivre, nous devons trouver un nouveau refuge.",
        "Mars… une terre hostile, froide, désertique… Mais c'est peut-être notre seul espoir.",
        "Aucun humain n’a jamais voyagé aussi loin… C’est le plus grand défi de notre histoire."
    ];

    let indexPhrase = 0;
    let indexLettre = 0;
    let isTyping = false;
    const narrateur = document.querySelector("#narrateur p");

    const sonClic = new Audio('/sound/clic.mp3');

    function afficherPhrase() {
        isTyping = true;
        narrateur.textContent = "";
        indexLettre = 0;

        const interval = setInterval(() => {
            if (indexLettre < phrases[indexPhrase].length) {
                narrateur.textContent += phrases[indexPhrase][indexLettre];
                indexLettre++;
            } else {
                clearInterval(interval);
                isTyping = false;
            }
        }, 50);
    }

    document.addEventListener("keydown", (event) => {
        if (event.key === "Enter" && !isTyping) {
            sonClic.play();
            if (indexPhrase < phrases.length - 1) {
                indexPhrase++;
                afficherPhrase();
            } else {
                // Ajout du fondu au noir avant la redirection
                const overlay = document.getElementById("transition-overlay");
                overlay.style.opacity = "1"; // Déclenche le fondu
                setTimeout(() => {
                    window.location.href = "/html/game.html"; 
                }, 3000); // Redirection après 3 secondes
            }
        }
    });

    afficherPhrase();
});

</script>
   
<div id="transition-overlay"></div>
 </body>
